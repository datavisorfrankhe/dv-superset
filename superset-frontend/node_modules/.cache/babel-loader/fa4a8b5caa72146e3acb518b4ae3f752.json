{"ast":null,"code":"import \"core-js/modules/web.dom-collections.iterator.js\";import _setTimeout from \"@babel/runtime-corejs3/core-js-stable/set-timeout\";var _jsxFileName = \"/Users/frankhe/projects/superset/superset-frontend/src/messageToasts/components/Toast.tsx\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { styled, css } from '@superset-ui/core';\nimport cx from 'classnames';\nimport Interweave from 'interweave';\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\nimport Icons from 'src/components/Icons';\nimport { ToastType } from 'src/messageToasts/constants';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nconst ToastContainer = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  span {\n    padding: 0 11px;\n  }\n`;\nconst StyledIcon = (theme) => css`\n  min-width: ${theme.gridUnit * 5}px;\n  color: ${theme.colors.grayscale.base};\n`;\nexport default function Toast({ toast, onCloseToast }) {\n  const hideTimer = useRef();\n  const [visible, setVisible] = useState(false);\n  const showToast = () => {\n    setVisible(true);\n  };\n  const handleClosePress = useCallback(() => {\n    if (hideTimer.current) {\n      clearTimeout(hideTimer.current);\n    }\n    // Wait for the transition\n    setVisible(() => {\n      _setTimeout(() => {\n        onCloseToast(toast.id);\n      }, 150);\n      return false;\n    });\n  }, [onCloseToast, toast.id]);\n  useEffect(() => {\n    _setTimeout(showToast);\n    if (toast.duration > 0) {\n      hideTimer.current = _setTimeout(handleClosePress, toast.duration);\n    }\n    return () => {\n      if (hideTimer.current) {\n        clearTimeout(hideTimer.current);\n      }\n    };\n  }, [handleClosePress, toast.duration]);\n  let className = 'toast--success';\n  let icon = ___EmotionJSX(Icons.CircleCheckSolid, { css: (theme) => StyledIcon(theme), __self: this, __source: { fileName: _jsxFileName, lineNumber: 68, columnNumber: 16 } });\n  if (toast.toastType === ToastType.WARNING) {\n    icon = ___EmotionJSX(Icons.WarningSolid, { css: StyledIcon, __self: this, __source: { fileName: _jsxFileName, lineNumber: 70, columnNumber: 16 } });\n    className = 'toast--warning';\n  } else\n  if (toast.toastType === ToastType.DANGER) {\n    icon = ___EmotionJSX(Icons.ErrorSolid, { css: StyledIcon, __self: this, __source: { fileName: _jsxFileName, lineNumber: 74, columnNumber: 16 } });\n    className = 'toast--danger';\n  } else\n  if (toast.toastType === ToastType.INFO) {\n    icon = ___EmotionJSX(Icons.InfoSolid, { css: StyledIcon, __self: this, __source: { fileName: _jsxFileName, lineNumber: 78, columnNumber: 16 } });\n    className = 'toast--info';\n  }\n  return ___EmotionJSX(ToastContainer, { className: cx('alert', 'toast', visible && 'toast--visible', className), \"data-test\": \"toast-container\", role: \"alert\", __self: this, __source: { fileName: _jsxFileName, lineNumber: 81, columnNumber: 13 } },\n  icon,\n  ___EmotionJSX(Interweave, { content: toast.text, __self: this, __source: { fileName: _jsxFileName, lineNumber: 83, columnNumber: 7 } }),\n  ___EmotionJSX(\"i\", { className: \"fa fa-close pull-right pointer\", role: \"button\", tabIndex: 0, onClick: handleClosePress, \"aria-label\": \"Close\", \"data-test\": \"close-button\", __self: this, __source: { fileName: _jsxFileName, lineNumber: 84, columnNumber: 7 } }));\n\n}__signature__(Toast, \"useRef{hideTimer}\\nuseState{[visible, setVisible](false)}\\nuseCallback{handleClosePress}\\nuseEffect{}\");;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(ToastContainer, \"ToastContainer\", \"/Users/frankhe/projects/superset/superset-frontend/src/messageToasts/components/Toast.tsx\");reactHotLoader.register(StyledIcon, \"StyledIcon\", \"/Users/frankhe/projects/superset/superset-frontend/src/messageToasts/components/Toast.tsx\");reactHotLoader.register(Toast, \"Toast\", \"/Users/frankhe/projects/superset/superset-frontend/src/messageToasts/components/Toast.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/Users/frankhe/projects/superset/superset-frontend/src/messageToasts/components/Toast.tsx"],"names":[],"mappings":"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","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { styled, css, SupersetTheme } from '@superset-ui/core';\nimport cx from 'classnames';\nimport Interweave from 'interweave';\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\nimport Icons from 'src/components/Icons';\nimport { ToastType } from 'src/messageToasts/constants';\nimport { ToastMeta } from '../types';\n\nconst ToastContainer = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  span {\n    padding: 0 11px;\n  }\n`;\n\nconst StyledIcon = (theme: SupersetTheme) => css`\n  min-width: ${theme.gridUnit * 5}px;\n  color: ${theme.colors.grayscale.base};\n`;\n\ninterface ToastPresenterProps {\n  toast: ToastMeta;\n  onCloseToast: (id: string) => void;\n}\n\nexport default function Toast({ toast, onCloseToast }: ToastPresenterProps) {\n  const hideTimer = useRef<ReturnType<typeof setTimeout>>();\n  const [visible, setVisible] = useState(false);\n  const showToast = () => {\n    setVisible(true);\n  };\n\n  const handleClosePress = useCallback(() => {\n    if (hideTimer.current) {\n      clearTimeout(hideTimer.current);\n    }\n    // Wait for the transition\n    setVisible(() => {\n      setTimeout(() => {\n        onCloseToast(toast.id);\n      }, 150);\n      return false;\n    });\n  }, [onCloseToast, toast.id]);\n\n  useEffect(() => {\n    setTimeout(showToast);\n\n    if (toast.duration > 0) {\n      hideTimer.current = setTimeout(handleClosePress, toast.duration);\n    }\n    return () => {\n      if (hideTimer.current) {\n        clearTimeout(hideTimer.current);\n      }\n    };\n  }, [handleClosePress, toast.duration]);\n\n  let className = 'toast--success';\n  let icon = <Icons.CircleCheckSolid css={theme => StyledIcon(theme)} />;\n\n  if (toast.toastType === ToastType.WARNING) {\n    icon = <Icons.WarningSolid css={StyledIcon} />;\n    className = 'toast--warning';\n  } else if (toast.toastType === ToastType.DANGER) {\n    icon = <Icons.ErrorSolid css={StyledIcon} />;\n    className = 'toast--danger';\n  } else if (toast.toastType === ToastType.INFO) {\n    icon = <Icons.InfoSolid css={StyledIcon} />;\n    className = 'toast--info';\n  }\n\n  return (\n    <ToastContainer\n      className={cx('alert', 'toast', visible && 'toast--visible', className)}\n      data-test=\"toast-container\"\n      role=\"alert\"\n    >\n      {icon}\n      <Interweave content={toast.text} />\n      <i\n        className=\"fa fa-close pull-right pointer\"\n        role=\"button\"\n        tabIndex={0}\n        onClick={handleClosePress}\n        aria-label=\"Close\"\n        data-test=\"close-button\"\n      />\n    </ToastContainer>\n  );\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}