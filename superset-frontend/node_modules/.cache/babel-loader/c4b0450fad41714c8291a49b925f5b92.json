{"ast":null,"code":"var _jsxFileName = \"/Users/frankhe/projects/superset/superset-frontend/src/views/CRUD/dashboard/DashboardCard.tsx\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport { t } from '@superset-ui/core';\nimport { handleDashboardDelete, CardStyles } from 'src/views/CRUD/utils';\nimport { isFeatureEnabled, FeatureFlag } from 'src/featureFlags';\nimport { Dropdown, Menu } from 'src/common/components';\nimport ConfirmStatusChange from 'src/components/ConfirmStatusChange';\nimport ListViewCard from 'src/components/ListViewCard';\nimport Icons from 'src/components/Icons';\nimport Label from 'src/components/Label';\nimport FacePile from 'src/components/FacePile';\nimport FaveStar from 'src/components/FaveStar';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nfunction DashboardCard({ dashboard, hasPerm, bulkSelectEnabled, dashboardFilter, refreshData, userId, addDangerToast, addSuccessToast, openDashboardEditModal, favoriteStatus, saveFavoriteStatus, showThumbnails, handleBulkDashboardExport }) {\n  const history = useHistory();\n  const canEdit = hasPerm('can_write');\n  const canDelete = hasPerm('can_write');\n  const canExport = hasPerm('can_read');\n  const menu = ___EmotionJSX(Menu, { __self: this, __source: { fileName: _jsxFileName, lineNumber: 36, columnNumber: 19 } },\n  canEdit && openDashboardEditModal && ___EmotionJSX(Menu.Item, { __self: this, __source: { fileName: _jsxFileName, lineNumber: 37, columnNumber: 46 } },\n  ___EmotionJSX(\"div\", { role: \"button\", tabIndex: 0, className: \"action-button\", onClick: () => openDashboardEditModal && openDashboardEditModal(dashboard), \"data-test\": \"dashboard-card-option-edit-button\", __self: this, __source: { fileName: _jsxFileName, lineNumber: 38, columnNumber: 11 } },\n  ___EmotionJSX(Icons.EditAlt, { iconSize: \"l\", \"data-test\": \"edit-alt\", __self: this, __source: { fileName: _jsxFileName, lineNumber: 39, columnNumber: 13 } }), \" \", t('Edit'))),\n\n\n  canExport && ___EmotionJSX(Menu.Item, { __self: this, __source: { fileName: _jsxFileName, lineNumber: 42, columnNumber: 22 } },\n  ___EmotionJSX(\"div\", { role: \"button\", tabIndex: 0, onClick: () => handleBulkDashboardExport([dashboard]), className: \"action-button\", \"data-test\": \"dashboard-card-option-export-button\", __self: this, __source: { fileName: _jsxFileName, lineNumber: 43, columnNumber: 11 } },\n  ___EmotionJSX(Icons.Share, { iconSize: \"l\", __self: this, __source: { fileName: _jsxFileName, lineNumber: 44, columnNumber: 13 } }), \" \", t('Export'))),\n\n\n  canDelete && ___EmotionJSX(Menu.Item, { __self: this, __source: { fileName: _jsxFileName, lineNumber: 47, columnNumber: 22 } },\n  ___EmotionJSX(ConfirmStatusChange, { title: t('Please confirm'), description: ___EmotionJSX(React.Fragment, null,\n    t('Are you sure you want to delete'), ' ',\n    ___EmotionJSX(\"b\", { __self: this, __source: { fileName: _jsxFileName, lineNumber: 50, columnNumber: 17 } }, dashboard.dashboard_title), \"?\"),\n    onConfirm: () => handleDashboardDelete(dashboard, refreshData, addSuccessToast, addDangerToast, dashboardFilter, userId), __self: this, __source: { fileName: _jsxFileName, lineNumber: 48, columnNumber: 11 } },\n  (confirmDelete) => ___EmotionJSX(\"div\", { role: \"button\", tabIndex: 0, className: \"action-button\", onClick: confirmDelete, \"data-test\": \"dashboard-card-option-delete-button\", __self: this, __source: { fileName: _jsxFileName, lineNumber: 52, columnNumber: 32 } },\n  ___EmotionJSX(Icons.Trash, { iconSize: \"l\", __self: this, __source: { fileName: _jsxFileName, lineNumber: 53, columnNumber: 17 } }), \" \", t('Delete')))));\n\n\n\n\n  return ___EmotionJSX(CardStyles, { onClick: () => {\n      if (!bulkSelectEnabled) {\n        history.push(dashboard.url);\n      }\n    }, __self: this, __source: { fileName: _jsxFileName, lineNumber: 58, columnNumber: 13 } },\n  ___EmotionJSX(ListViewCard, { loading: dashboard.loading || false, title: dashboard.dashboard_title, titleRight: ___EmotionJSX(Label, { __self: this, __source: { fileName: _jsxFileName, lineNumber: 63, columnNumber: 104 } }, dashboard.published ? t('published') : t('draft')), cover: !isFeatureEnabled(FeatureFlag.THUMBNAILS) || !showThumbnails ? ___EmotionJSX(React.Fragment, null) : null, url: bulkSelectEnabled ? undefined : dashboard.url, linkComponent: Link, imgURL: dashboard.thumbnail_url, imgFallbackURL: \"/static/assets/images/dashboard-card-fallback.svg\", description: t('Modified %s', dashboard.changed_on_delta_humanized), coverLeft: ___EmotionJSX(FacePile, { users: dashboard.owners || [], __self: this, __source: { fileName: _jsxFileName, lineNumber: 63, columnNumber: 511 } }), actions: ___EmotionJSX(ListViewCard.Actions, { onClick: (e) => {\n        e.stopPropagation();\n        e.preventDefault();\n      }, __self: this, __source: { fileName: _jsxFileName, lineNumber: 63, columnNumber: 564 } },\n    ___EmotionJSX(FaveStar, { itemId: dashboard.id, saveFaveStar: saveFavoriteStatus, isStarred: favoriteStatus, __self: this, __source: { fileName: _jsxFileName, lineNumber: 67, columnNumber: 13 } }),\n    ___EmotionJSX(Dropdown, { overlay: menu, __self: this, __source: { fileName: _jsxFileName, lineNumber: 68, columnNumber: 13 } },\n    ___EmotionJSX(Icons.MoreHoriz, { __self: this, __source: { fileName: _jsxFileName, lineNumber: 69, columnNumber: 15 } }))), __self: this, __source: { fileName: _jsxFileName, lineNumber: 63, columnNumber: 7 } }));\n\n\n\n}__signature__(DashboardCard, \"useHistory{history}\", () => [useHistory]);const _default =\nDashboardCard;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(DashboardCard, \"DashboardCard\", \"/Users/frankhe/projects/superset/superset-frontend/src/views/CRUD/dashboard/DashboardCard.tsx\");reactHotLoader.register(_default, \"default\", \"/Users/frankhe/projects/superset/superset-frontend/src/views/CRUD/dashboard/DashboardCard.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/Users/frankhe/projects/superset/superset-frontend/src/views/CRUD/dashboard/DashboardCard.tsx"],"names":[],"mappings":"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","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport { t } from '@superset-ui/core';\nimport { handleDashboardDelete, CardStyles } from 'src/views/CRUD/utils';\nimport { isFeatureEnabled, FeatureFlag } from 'src/featureFlags';\nimport { Dropdown, Menu } from 'src/common/components';\nimport ConfirmStatusChange from 'src/components/ConfirmStatusChange';\nimport ListViewCard from 'src/components/ListViewCard';\nimport Icons from 'src/components/Icons';\nimport Label from 'src/components/Label';\nimport FacePile from 'src/components/FacePile';\nimport FaveStar from 'src/components/FaveStar';\nimport { Dashboard } from 'src/views/CRUD/types';\n\ninterface DashboardCardProps {\n  isChart?: boolean;\n  dashboard: Dashboard;\n  hasPerm: (name: string) => boolean;\n  bulkSelectEnabled: boolean;\n  refreshData: () => void;\n  loading: boolean;\n  addDangerToast: (msg: string) => void;\n  addSuccessToast: (msg: string) => void;\n  openDashboardEditModal?: (d: Dashboard) => void;\n  saveFavoriteStatus: (id: number, isStarred: boolean) => void;\n  favoriteStatus: boolean;\n  dashboardFilter?: string;\n  userId?: number;\n  showThumbnails?: boolean;\n  handleBulkDashboardExport: (dashboardsToExport: Dashboard[]) => void;\n}\n\nfunction DashboardCard({\n  dashboard,\n  hasPerm,\n  bulkSelectEnabled,\n  dashboardFilter,\n  refreshData,\n  userId,\n  addDangerToast,\n  addSuccessToast,\n  openDashboardEditModal,\n  favoriteStatus,\n  saveFavoriteStatus,\n  showThumbnails,\n  handleBulkDashboardExport,\n}: DashboardCardProps) {\n  const history = useHistory();\n  const canEdit = hasPerm('can_write');\n  const canDelete = hasPerm('can_write');\n  const canExport = hasPerm('can_read');\n\n  const menu = (\n    <Menu>\n      {canEdit && openDashboardEditModal && (\n        <Menu.Item>\n          <div\n            role=\"button\"\n            tabIndex={0}\n            className=\"action-button\"\n            onClick={() =>\n              openDashboardEditModal && openDashboardEditModal(dashboard)\n            }\n            data-test=\"dashboard-card-option-edit-button\"\n          >\n            <Icons.EditAlt iconSize=\"l\" data-test=\"edit-alt\" /> {t('Edit')}\n          </div>\n        </Menu.Item>\n      )}\n      {canExport && (\n        <Menu.Item>\n          <div\n            role=\"button\"\n            tabIndex={0}\n            onClick={() => handleBulkDashboardExport([dashboard])}\n            className=\"action-button\"\n            data-test=\"dashboard-card-option-export-button\"\n          >\n            <Icons.Share iconSize=\"l\" /> {t('Export')}\n          </div>\n        </Menu.Item>\n      )}\n      {canDelete && (\n        <Menu.Item>\n          <ConfirmStatusChange\n            title={t('Please confirm')}\n            description={\n              <>\n                {t('Are you sure you want to delete')}{' '}\n                <b>{dashboard.dashboard_title}</b>?\n              </>\n            }\n            onConfirm={() =>\n              handleDashboardDelete(\n                dashboard,\n                refreshData,\n                addSuccessToast,\n                addDangerToast,\n                dashboardFilter,\n                userId,\n              )\n            }\n          >\n            {confirmDelete => (\n              <div\n                role=\"button\"\n                tabIndex={0}\n                className=\"action-button\"\n                onClick={confirmDelete}\n                data-test=\"dashboard-card-option-delete-button\"\n              >\n                <Icons.Trash iconSize=\"l\" /> {t('Delete')}\n              </div>\n            )}\n          </ConfirmStatusChange>\n        </Menu.Item>\n      )}\n    </Menu>\n  );\n  return (\n    <CardStyles\n      onClick={() => {\n        if (!bulkSelectEnabled) {\n          history.push(dashboard.url);\n        }\n      }}\n    >\n      <ListViewCard\n        loading={dashboard.loading || false}\n        title={dashboard.dashboard_title}\n        titleRight={\n          <Label>{dashboard.published ? t('published') : t('draft')}</Label>\n        }\n        cover={\n          !isFeatureEnabled(FeatureFlag.THUMBNAILS) || !showThumbnails ? (\n            <></>\n          ) : null\n        }\n        url={bulkSelectEnabled ? undefined : dashboard.url}\n        linkComponent={Link}\n        imgURL={dashboard.thumbnail_url}\n        imgFallbackURL=\"/static/assets/images/dashboard-card-fallback.svg\"\n        description={t('Modified %s', dashboard.changed_on_delta_humanized)}\n        coverLeft={<FacePile users={dashboard.owners || []} />}\n        actions={\n          <ListViewCard.Actions\n            onClick={e => {\n              e.stopPropagation();\n              e.preventDefault();\n            }}\n          >\n            <FaveStar\n              itemId={dashboard.id}\n              saveFaveStar={saveFavoriteStatus}\n              isStarred={favoriteStatus}\n            />\n            <Dropdown overlay={menu}>\n              <Icons.MoreHoriz />\n            </Dropdown>\n          </ListViewCard.Actions>\n        }\n      />\n    </CardStyles>\n  );\n}\n\nexport default DashboardCard;\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}