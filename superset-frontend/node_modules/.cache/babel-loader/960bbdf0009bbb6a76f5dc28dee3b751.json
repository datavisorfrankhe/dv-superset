{"ast":null,"code":"var _jsxFileName = \"/Users/frankhe/projects/superset/superset-frontend/src/filters/components/Time/TimeFilterPlugin.tsx\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { styled } from '@superset-ui/core';\nimport React, { useEffect } from 'react';\nimport DateFilterControl from 'src/explore/components/controls/DateFilterControl';\nimport { NO_TIME_RANGE } from 'src/explore/constants';\nimport { FilterPluginStyle } from '../common';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nconst TimeFilterStyles = styled(FilterPluginStyle)`\n  overflow-x: auto;\n`;\nconst ControlContainer = styled.div`\n  padding: 2px;\n  & > span {\n    border: 2px solid transparent;\n    display: inline-block;\n    border: ${({ theme, validateStatus }) => {var _theme$colors$validat;return validateStatus && `2px solid ${(_theme$colors$validat = theme.colors[validateStatus]) == null ? void 0 : _theme$colors$validat.base}`;}};\n  }\n  &:focus {\n    & > span {\n      border: 2px solid\n        ${({ theme, validateStatus }) => {var _theme$colors$validat2;return validateStatus ? (_theme$colors$validat2 =\n  theme.colors[validateStatus]) == null ? void 0 : _theme$colors$validat2.base :\n  theme.colors.primary.base;}};\n      outline: 0;\n      box-shadow: 0 0 0 2px\n        ${({ validateStatus }) => validateStatus ?\n'rgba(224, 67, 85, 12%)' :\n'rgba(32, 167, 201, 0.2)'};\n    }\n  }\n`;\nexport default function TimeFilterPlugin(props) {var _props$formData;\n  const { setDataMask, setFocusedFilter, unsetFocusedFilter, width, height, filterState, formData: { inputRef } } = props;\n  const handleTimeRangeChange = (timeRange) => {\n    const isSet = timeRange && timeRange !== NO_TIME_RANGE;\n    setDataMask({\n      extraFormData: isSet ?\n      {\n        time_range: timeRange } :\n\n      {},\n      filterState: {\n        value: isSet ? timeRange : undefined } });\n\n\n  };\n  useEffect(() => {\n    handleTimeRangeChange(filterState.value);\n  }, [filterState.value]);\n  return (_props$formData = props.formData) != null && _props$formData.inView ?\n  // @ts-ignore\n  ___EmotionJSX(TimeFilterStyles, { width: width, height: height, __self: this, __source: { fileName: _jsxFileName, lineNumber: 68, columnNumber: 5 } },\n  ___EmotionJSX(ControlContainer, { tabIndex: -1, ref: inputRef, validateStatus: filterState.validateStatus, onFocus: setFocusedFilter, onBlur: unsetFocusedFilter, onMouseEnter: setFocusedFilter, onMouseLeave: unsetFocusedFilter, __self: this, __source: { fileName: _jsxFileName, lineNumber: 69, columnNumber: 7 } },\n  ___EmotionJSX(DateFilterControl, { value: filterState.value || NO_TIME_RANGE, name: \"time_range\", onChange: handleTimeRangeChange, __self: this, __source: { fileName: _jsxFileName, lineNumber: 70, columnNumber: 9 } }))) :\n\n  null;\n}__signature__(TimeFilterPlugin, \"useEffect{}\");;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(TimeFilterStyles, \"TimeFilterStyles\", \"/Users/frankhe/projects/superset/superset-frontend/src/filters/components/Time/TimeFilterPlugin.tsx\");reactHotLoader.register(ControlContainer, \"ControlContainer\", \"/Users/frankhe/projects/superset/superset-frontend/src/filters/components/Time/TimeFilterPlugin.tsx\");reactHotLoader.register(TimeFilterPlugin, \"TimeFilterPlugin\", \"/Users/frankhe/projects/superset/superset-frontend/src/filters/components/Time/TimeFilterPlugin.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/Users/frankhe/projects/superset/superset-frontend/src/filters/components/Time/TimeFilterPlugin.tsx"],"names":[],"mappings":"iaAAA;;;;;;;;;;;;;;;;;AAiBG;AACH,SAAS,MAAT,QAAuB,mBAAvB;AACA,OAAO,KAAP,IAAgB,SAAhB,QAAiC,OAAjC;AACA,OAAO,iBAAP,MAA8B,mDAA9B;AACA,SAAS,aAAT,QAA8B,uBAA9B;AAEA,SAAS,iBAAT,QAAkC,WAAlC,C;AAEA,MAAM,gBAAgB,GAAG,MAAM,CAAC,iBAAD,CAAmB;;AAEjD,CAFD;AAIA,MAAM,gBAAgB,GAAG,MAAM,CAAC,GAE9B;;;;;cAKY,CAAC,EAAE,KAAF,EAAS,cAAT,EAAD,uCACR,cAAc,IAAI,aAAA,yBAAa,KAAK,CAAC,MAAN,CAAa,cAAb,CAAb,qBAAa,sBAA8B,IAAI,EADzD,EAC2D;;;;;UAK/D,CAAC,EAAE,KAAF,EAAS,cAAT,EAAD,wCACA,cAAc;AACV,EAAA,KAAK,CAAC,MAAN,CAAa,cAAb,CADU,qBACV,uBAA8B,IADpB;AAEV,EAAA,KAAK,CAAC,MAAN,CAAa,OAAb,CAAqB,IAHzB,EAG6B;;;UAG7B,CAAC,EAAE,cAAF,EAAD,KACA,cAAc;AACV,wBADU;AAEV,yBAAyB;;;AAGtC,CAzBD;AA2BA,eAAc,SAAU,gBAAV,CAA2B,KAA3B,EAAuD;AACnE,QAAM,EACJ,WADI,EAEJ,gBAFI,EAGJ,kBAHI,EAIJ,KAJI,EAKJ,MALI,EAMJ,WANI,EAOJ,QAAQ,EAAE,EAAE,QAAF,EAPN,KAQF,KARJ;AAUA,QAAM,qBAAqB,GAAG,CAAC,SAAD,KAA6B;AACzD,UAAM,KAAK,GAAG,SAAS,IAAI,SAAS,KAAK,aAAzC;AACA,IAAA,WAAW,CAAC;AACV,MAAA,aAAa,EAAE,KAAK;AAChB;AACE,QAAA,UAAU,EAAE,SADd,EADgB;;AAIhB,QALM;AAMV,MAAA,WAAW,EAAE;AACX,QAAA,KAAK,EAAE,KAAK,GAAG,SAAH,GAAe,SADhB,EANH,EAAD,CAAX;;;AAUD,GAZD;AAcA,EAAA,SAAS,CAAC,MAAK;AACb,IAAA,qBAAqB,CAAC,WAAW,CAAC,KAAb,CAArB;AACD,GAFQ,EAEN,CAAC,WAAW,CAAC,KAAb,CAFM,CAAT;AAIA,SAAO,mBAAA,KAAK,CAAC,QAAN,6BAAgB,MAAhB;AACL;AACA,gBAAC,gBAAD,IAAkB,KAAK,EAAE,KAAzB,EAAgC,MAAM,EAAE,MAAxC;AACE,gBAAC,gBAAD,IACE,QAAQ,EAAE,CAAC,CADb,EAEE,GAAG,EAAE,QAFP,EAGE,cAAc,EAAE,WAAW,CAAC,cAH9B,EAIE,OAAO,EAAE,gBAJX,EAKE,MAAM,EAAE,kBALV,EAME,YAAY,EAAE,gBANhB,EAOE,YAAY,EAAE,kBAPhB;AASE,gBAAC,iBAAD,IACE,KAAK,EAAE,WAAW,CAAC,KAAZ,IAAqB,aAD9B,EAEE,IAAI,EAAC,YAFP,EAGE,QAAQ,EAAE,qBAHZ,wFATF,CADF,CAFK;;AAmBH,MAnBJ;AAoBD,C,cAjDuB,gB,kMA/BlB,gB,qJAIA,gB,qJA2BkB,gB","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { styled } from '@superset-ui/core';\nimport React, { useEffect } from 'react';\nimport DateFilterControl from 'src/explore/components/controls/DateFilterControl';\nimport { NO_TIME_RANGE } from 'src/explore/constants';\nimport { PluginFilterTimeProps } from './types';\nimport { FilterPluginStyle } from '../common';\n\nconst TimeFilterStyles = styled(FilterPluginStyle)`\n  overflow-x: auto;\n`;\n\nconst ControlContainer = styled.div<{\n  validateStatus?: 'error' | 'warning' | 'info';\n}>`\n  padding: 2px;\n  & > span {\n    border: 2px solid transparent;\n    display: inline-block;\n    border: ${({ theme, validateStatus }) =>\n      validateStatus && `2px solid ${theme.colors[validateStatus]?.base}`};\n  }\n  &:focus {\n    & > span {\n      border: 2px solid\n        ${({ theme, validateStatus }) =>\n          validateStatus\n            ? theme.colors[validateStatus]?.base\n            : theme.colors.primary.base};\n      outline: 0;\n      box-shadow: 0 0 0 2px\n        ${({ validateStatus }) =>\n          validateStatus\n            ? 'rgba(224, 67, 85, 12%)'\n            : 'rgba(32, 167, 201, 0.2)'};\n    }\n  }\n`;\n\nexport default function TimeFilterPlugin(props: PluginFilterTimeProps) {\n  const {\n    setDataMask,\n    setFocusedFilter,\n    unsetFocusedFilter,\n    width,\n    height,\n    filterState,\n    formData: { inputRef },\n  } = props;\n\n  const handleTimeRangeChange = (timeRange?: string): void => {\n    const isSet = timeRange && timeRange !== NO_TIME_RANGE;\n    setDataMask({\n      extraFormData: isSet\n        ? {\n            time_range: timeRange,\n          }\n        : {},\n      filterState: {\n        value: isSet ? timeRange : undefined,\n      },\n    });\n  };\n\n  useEffect(() => {\n    handleTimeRangeChange(filterState.value);\n  }, [filterState.value]);\n\n  return props.formData?.inView ? (\n    // @ts-ignore\n    <TimeFilterStyles width={width} height={height}>\n      <ControlContainer\n        tabIndex={-1}\n        ref={inputRef}\n        validateStatus={filterState.validateStatus}\n        onFocus={setFocusedFilter}\n        onBlur={unsetFocusedFilter}\n        onMouseEnter={setFocusedFilter}\n        onMouseLeave={unsetFocusedFilter}\n      >\n        <DateFilterControl\n          value={filterState.value || NO_TIME_RANGE}\n          name=\"time_range\"\n          onChange={handleTimeRangeChange}\n        />\n      </ControlContainer>\n    </TimeFilterStyles>\n  ) : null;\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}