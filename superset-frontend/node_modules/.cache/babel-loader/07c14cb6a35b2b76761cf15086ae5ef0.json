{"ast":null,"code":"import \"core-js/modules/web.dom-collections.iterator.js\";import _someInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/some\";import _Object$values from \"@babel/runtime-corejs3/core-js-stable/object/values\";import _reduceInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/reduce\";import _forEachInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/for-each\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { areObjectsEqual } from 'src/reduxUtils';\nexport var TabIds;\n(function (TabIds) {\n  TabIds[\"AllFilters\"] = \"allFilters\";\n  TabIds[\"FilterSets\"] = \"filterSets\";\n})(TabIds || (TabIds = {}));\nexport function mapParentFiltersToChildren(filters) {\n  const cascadeChildren = {};\n  _forEachInstanceProperty(filters).call(filters, (filter) => {\n    const [parentId] = filter.cascadeParentIds || [];\n    if (parentId) {\n      if (!cascadeChildren[parentId]) {\n        cascadeChildren[parentId] = [];\n      }\n      cascadeChildren[parentId].push(filter);\n    }\n  });\n  return cascadeChildren;\n}\nexport const getOnlyExtraFormData = (data) => {var _context;return _reduceInstanceProperty(_context = _Object$values(data)).call(_context, (prev, next) => ({ ...prev, [next.id]: next.extraFormData }), {});};\nexport const checkIsMissingRequiredValue = (filter, filterState) => {\n  const value = filterState == null ? void 0 : filterState.value;\n  // TODO: this property should be unhardcoded\n  return filter.controlValues.enableEmptyFilter && (\n  value === null || value === undefined);\n};\nexport const checkIsApplyDisabled = (dataMaskSelected, dataMaskApplied, filters) => {\n  const dataSelectedValues = _Object$values(dataMaskSelected);\n  const dataAppliedValues = _Object$values(dataMaskApplied);\n  return areObjectsEqual(getOnlyExtraFormData(dataMaskSelected), getOnlyExtraFormData(dataMaskApplied), { ignoreUndefined: true }) ||\n  dataSelectedValues.length !== dataAppliedValues.length ||\n  _someInstanceProperty(filters).call(filters, (filter) => {var _dataMaskSelected$fil;return checkIsMissingRequiredValue(filter, dataMaskSelected == null ? void 0 : (_dataMaskSelected$fil = dataMaskSelected[filter == null ? void 0 : filter.id]) == null ? void 0 : _dataMaskSelected$fil.filterState);});\n};;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(TabIds, \"TabIds\", \"/Users/frankhe/projects/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/utils.ts\");reactHotLoader.register(mapParentFiltersToChildren, \"mapParentFiltersToChildren\", \"/Users/frankhe/projects/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/utils.ts\");reactHotLoader.register(getOnlyExtraFormData, \"getOnlyExtraFormData\", \"/Users/frankhe/projects/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/utils.ts\");reactHotLoader.register(checkIsMissingRequiredValue, \"checkIsMissingRequiredValue\", \"/Users/frankhe/projects/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/utils.ts\");reactHotLoader.register(checkIsApplyDisabled, \"checkIsApplyDisabled\", \"/Users/frankhe/projects/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/utils.ts\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/Users/frankhe/projects/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/utils.ts"],"names":[],"mappings":"qsBAAA;;;;;;;;;;;;;;;;;AAiBG;AAGH,SAAS,eAAT,QAAgC,gBAAhC;AAIA,OAAA,IAAY,MAAZ;AAAA,CAAA,UAAY,MAAZ,EAAkB;AAChB,EAAA,MAAA,CAAA,YAAA,CAAA,GAAA,YAAA;AACA,EAAA,MAAA,CAAA,YAAA,CAAA,GAAA,YAAA;AACD,CAHD,EAAY,MAAM,KAAN,MAAM,GAAA,EAAA,CAAlB;AAKA,OAAM,SAAU,0BAAV,CACJ,OADI,EACa;AAEjB,QAAM,eAAe,GAAG,EAAxB;AACA,2BAAA,OAAO,MAAP,CAAA,OAAO,EAAS,CAAA,MAAM,KAAG;AACvB,UAAM,CAAC,QAAD,IAAa,MAAM,CAAC,gBAAP,IAA2B,EAA9C;AACA,QAAI,QAAJ,EAAc;AACZ,UAAI,CAAC,eAAe,CAAC,QAAD,CAApB,EAAgC;AAC9B,QAAA,eAAe,CAAC,QAAD,CAAf,GAA4B,EAA5B;AACD;AACD,MAAA,eAAe,CAAC,QAAD,CAAf,CAA0B,IAA1B,CAA+B,MAA/B;AACD;AACF,GARM,CAAP;AASA,SAAO,eAAP;AACD;AAED,OAAO,MAAM,oBAAoB,GAAG,CAAC,IAAD,0BAClC,kDAAc,IAAd,kBACE,CAAC,IAAD,EAAO,IAAP,MAAiB,EAAE,GAAG,IAAL,EAAW,CAAC,IAAI,CAAC,EAAN,GAAW,IAAI,CAAC,aAA3B,EAAjB,CADF,EAEE,EAFF,CADkC,EAA7B;AAMP,OAAO,MAAM,2BAA2B,GAAG,CACzC,MADyC,EAEzC,WAFyC,KAGvC;AACF,QAAM,KAAK,GAAG,WAAH,oBAAG,WAAW,CAAE,KAA3B;AACA;AACA,SACE,MAAM,CAAC,aAAP,CAAqB,iBAArB;AACC,EAAA,KAAK,KAAK,IAAV,IAAkB,KAAK,KAAK,SAD7B,CADF;AAID,CAVM;AAYP,OAAO,MAAM,oBAAoB,GAAG,CAClC,gBADkC,EAElC,eAFkC,EAGlC,OAHkC,KAIhC;AACF,QAAM,kBAAkB,GAAG,eAAc,gBAAd,CAA3B;AACA,QAAM,iBAAiB,GAAG,eAAc,eAAd,CAA1B;AAEA,SACE,eAAe,CACb,oBAAoB,CAAC,gBAAD,CADP,EAEb,oBAAoB,CAAC,eAAD,CAFP,EAGb,EAAE,eAAe,EAAE,IAAnB,EAHa,CAAf;AAKA,EAAA,kBAAkB,CAAC,MAAnB,KAA8B,iBAAiB,CAAC,MALhD;AAMA,wBAAA,OAAO,MAAP,CAAA,OAAO,EAAM,CAAA,MAAM,uCACjB,2BAA2B,CACzB,MADyB,EAEzB,gBAFyB,6CAEzB,gBAAgB,CAAG,MAAH,oBAAG,MAAM,CAAE,EAAX,CAFS,qBAEzB,sBAAgC,WAFP,CADV,EAAZ,CAPT;AAcD,CAtBM,C,iLAvCK,M,oJAKI,0B,wKAgBH,oB,kKAMA,2B,yKAYA,oB","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { DataMaskStateWithId } from 'src/dataMask/types';\nimport { areObjectsEqual } from 'src/reduxUtils';\nimport { FilterState } from '@superset-ui/core';\nimport { Filter } from '../types';\n\nexport enum TabIds {\n  AllFilters = 'allFilters',\n  FilterSets = 'filterSets',\n}\n\nexport function mapParentFiltersToChildren(\n  filters: Filter[],\n): { [id: string]: Filter[] } {\n  const cascadeChildren = {};\n  filters.forEach(filter => {\n    const [parentId] = filter.cascadeParentIds || [];\n    if (parentId) {\n      if (!cascadeChildren[parentId]) {\n        cascadeChildren[parentId] = [];\n      }\n      cascadeChildren[parentId].push(filter);\n    }\n  });\n  return cascadeChildren;\n}\n\nexport const getOnlyExtraFormData = (data: DataMaskStateWithId) =>\n  Object.values(data).reduce(\n    (prev, next) => ({ ...prev, [next.id]: next.extraFormData }),\n    {},\n  );\n\nexport const checkIsMissingRequiredValue = (\n  filter: Filter,\n  filterState?: FilterState,\n) => {\n  const value = filterState?.value;\n  // TODO: this property should be unhardcoded\n  return (\n    filter.controlValues.enableEmptyFilter &&\n    (value === null || value === undefined)\n  );\n};\n\nexport const checkIsApplyDisabled = (\n  dataMaskSelected: DataMaskStateWithId,\n  dataMaskApplied: DataMaskStateWithId,\n  filters: Filter[],\n) => {\n  const dataSelectedValues = Object.values(dataMaskSelected);\n  const dataAppliedValues = Object.values(dataMaskApplied);\n\n  return (\n    areObjectsEqual(\n      getOnlyExtraFormData(dataMaskSelected),\n      getOnlyExtraFormData(dataMaskApplied),\n      { ignoreUndefined: true },\n    ) ||\n    dataSelectedValues.length !== dataAppliedValues.length ||\n    filters.some(filter =>\n      checkIsMissingRequiredValue(\n        filter,\n        dataMaskSelected?.[filter?.id]?.filterState,\n      ),\n    )\n  );\n};\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}